<div class="slide" style="display: flex; flex-direction: column; height: 100%; border: 3px solid red;">
    <h1 style="border: 2px solid yellow; margin: 0;">Interactive Demo</h1>

    <div class="demo-container" style="flex: 1; height: auto; border: 3px solid lime;">
        <div class="demo-section">
            <h3>üéÆ Try It Yourself: Angle Averaging</h3>
            
            <div class="angle-inputs">
                <label>
                    <span class="angle-label">Angle 1:</span>
                    <input type="range" id="angle1" min="0" max="359" value="350">
                    <span class="angle-value" id="angle1-display">350¬∞</span>
                </label>
                <label>
                    <span class="angle-label">Angle 2:</span>
                    <input type="range" id="angle2" min="0" max="359" value="10">
                    <span class="angle-value" id="angle2-display">10¬∞</span>
                </label>
            </div>
            
            <div class="demo-visual">
                <svg width="400" height="400" viewBox="0 0 400 400" id="demo-svg">
                    <!-- Circle -->
                    <circle cx="200" cy="200" r="150" fill="none" stroke="#1B4A8C" stroke-width="3" opacity="0.8"/>

                    <!-- Grid lines for compass -->
                    <line x1="200" y1="50" x2="200" y2="350" stroke="#1B4A8C" stroke-width="1" opacity="0.3"/>
                    <line x1="50" y1="200" x2="350" y2="200" stroke="#1B4A8C" stroke-width="1" opacity="0.3"/>

                    <!-- Compass labels -->
                    <text x="200" y="30" text-anchor="middle" font-size="16" font-weight="bold" fill="var(--digital-teal)">0¬∞</text>
                    <text x="370" y="205" text-anchor="middle" font-size="16" font-weight="bold" fill="var(--digital-teal)">90¬∞</text>
                    <text x="200" y="380" text-anchor="middle" font-size="16" font-weight="bold" fill="var(--digital-teal)">180¬∞</text>
                    <text x="30" y="205" text-anchor="middle" font-size="16" font-weight="bold" fill="var(--digital-teal)">270¬∞</text>

                    <!-- Angle 1 line -->
                    <line id="angle1-line" x1="200" y1="200" x2="200" y2="50" stroke="var(--digital-teal)" stroke-width="4" stroke-linecap="round"/>
                    <circle id="angle1-point" cx="200" cy="50" r="8" fill="var(--digital-teal)" stroke="var(--digital-teal)" stroke-width="2"/>

                    <!-- Angle 2 line -->
                    <line id="angle2-line" x1="200" y1="200" x2="200" y2="50" stroke="var(--flora-green)" stroke-width="4" stroke-linecap="round"/>
                    <circle id="angle2-point" cx="200" cy="50" r="8" fill="var(--flora-green)" stroke="var(--digital-teal)" stroke-width="2"/>

                    <!-- Average (wrong) -->
                    <line id="avg-wrong-line" x1="200" y1="200" x2="200" y2="350" stroke="var(--flora-green)" stroke-width="3" stroke-dasharray="8,4" opacity="0" stroke-linecap="round"/>
                    <circle id="avg-wrong-point" cx="200" cy="350" r="6" fill="var(--flora-green)" opacity="0"/>

                    <!-- Average (correct) -->
                    <line id="avg-correct-line" x1="200" y1="200" x2="200" y2="50" stroke="var(--digital-teal)" stroke-width="5" stroke-linecap="round"/>
                    <circle id="avg-correct-point" cx="200" cy="50" r="10" fill="var(--digital-teal)" stroke="var(--flora-green)" stroke-width="3"/>

                    <!-- Center point -->
                    <circle cx="200" cy="200" r="5" fill="#F5F0E6"/>
                </svg>
            </div>
            
            <div class="demo-results">
                <div class="result wrong-result">
                    <h4>‚ùå Linear Average</h4>
                    <p id="wrong-result">180¬∞</p>
                </div>
                
                <div class="result correct-result">
                    <h4>‚úÖ Circular Average</h4>
                    <p id="correct-result">0¬∞</p>
                </div>
            </div>
        </div>
        
        <div class="code-section">
            <h3>The Code Behind It</h3>
            <pre><code id="demo-code">function circularAverage(a1, a2) {
    // Convert to radians
    const theta1 = a1 * Math.PI / 180;
    const theta2 = a2 * Math.PI / 180;
    
    // Embed on unit circle
    const v1 = [Math.cos(theta1), Math.sin(theta1)];
    const v2 = [Math.cos(theta2), Math.sin(theta2)];
    
    // Average vectors
    const avgVec = [(v1[0] + v2[0])/2, (v1[1] + v2[1])/2];
    
    // Convert back to angle
    const avgTheta = Math.atan2(avgVec[1], avgVec[0]);
    return (avgTheta * 180 / Math.PI + 360) % 360;
}</code></pre>
        </div>
    </div>
</div>

<script>
// Debug layout dimensions
window.addEventListener('load', function() {
    console.log('=== LAYOUT DEBUG INFO ===');

    const slide = document.querySelector('.slide');
    const h1 = document.querySelector('h1');
    const demoContainer = document.querySelector('.demo-container');
    const demoSection = document.querySelector('.demo-section');
    const codeSection = document.querySelector('.code-section');

    function logElement(name, element) {
        if (element) {
            const rect = element.getBoundingClientRect();
            const computed = window.getComputedStyle(element);
            console.log(`${name}:`, {
                position: { x: rect.x, y: rect.y },
                size: { width: rect.width, height: rect.height },
                right: rect.right,
                bottom: rect.bottom,
                computedHeight: computed.height,
                computedWidth: computed.width,
                display: computed.display,
                flex: computed.flex
            });
        }
    }

    logElement('Slide', slide);
    logElement('H1', h1);
    logElement('Demo Container', demoContainer);
    logElement('Demo Section', demoSection);
    logElement('Code Section', codeSection);

    console.log('Viewport:', { width: window.innerWidth, height: window.innerHeight });
    console.log('Document body:', document.body.getBoundingClientRect());
});
</script>

